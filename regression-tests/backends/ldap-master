case $context in
	ldap)
		[ -z "$LDAPUSER" ] && LDAPUSER='uid=peter,o=habbie'
		[ -z "$LDAPPASSWD" ] && LDAPPASSWD='secret'
		[ -z "$LDAPBASEDN" ] && LDAPBASEDN='ou=dns,o=habbie'
		[ -z "$LDAPRELATTR" ] && LDAPRELATTR='ou: dns'

		ldapdelete -D $LDAPUSER -w $LDAPPASSWD -r $LDAPBASEDN || true
		ldapadd -D $LDAPUSER -w $LDAPPASSWD << __EOF__
dn: $LDAPBASEDN
objectClass: organizationalUnit
$LDAPRELATTR
__EOF__

		../pdns/zone2ldap --dnsttl=yes --basedn=$LDAPBASEDN --layout=tree --named-conf=named.conf | ldapmodify -D $LDAPUSER -w $LDAPPASSWD -c || true

		cat > pdns-ldap.conf << __EOF__
module-dir=./modules
launch=ldap
ldap-basedn=$LDAPBASEDN
ldap-method=tree
__EOF__

		# $PDNSUTIL --config-dir=. --config-name=oracle import-tsig-key test $ALGORITHM $KEY
		# $PDNSUTIL --config-dir=. --config-name=oracle activate-tsig-key tsig.com test master

		$RUNWRAPPER $PDNS --daemon=no --local-port=$port --config-dir=. \
			--config-name=ldap --socket-dir=./ --no-shuffle \
			--send-root-referral --query-logging \
			--cache-ttl=$cachettl --dname-processing $lua_prequery &

		skipreasons="nodnssec noent nodyndns nometa noaxfr"

		;;
	*)
		nocontext=yes
esac
